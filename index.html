<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Redirecting...</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007AFF;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        p {
            color: #666;
            font-size: 16px;
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="spinner"></div>
        <p>Redirecting you to the correct store...</p>
    </div>

    <script>
        // Configuration - Fajr App Store Links
        const APP_CONFIG = {
            android: {
                playStoreUrl: 'https://play.google.com/store/apps/details?id=com.blink22.fajr&hl=en',
                marketUrl: 'market://details?id=com.blink22.fajr'
            },
            ios: {
                appStoreUrl: 'https://apps.apple.com/eg/app/fajr-fajr-alarm-prayer-times/id6468405243',
                itmsUrl: 'itms-apps://itunes.apple.com/app/id6468405243'
            },
            fallback: 'https://play.google.com/store/apps/details?id=com.blink22.fajr&hl=en' // Fallback to Google Play for desktop users
        };

        const userAgent = navigator.userAgent || navigator.vendor || window.opera;

        // Function to try URL scheme first, then fallback to web URL
        function tryRedirect(schemeUrl, webUrl) {
            // Try URL scheme first
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            iframe.src = schemeUrl;
            document.body.appendChild(iframe);
            
            // Fallback to web URL after short delay
            setTimeout(() => {
                document.body.removeChild(iframe);
                if (document.visibilityState === 'visible') {
                    window.location.href = webUrl;
                }
            }, 500);
        }

        if (/android/i.test(userAgent)) {
            // Redirect to Google Play Store
            tryRedirect(APP_CONFIG.android.marketUrl, APP_CONFIG.android.playStoreUrl);
        } else if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
            // Redirect to App Store
            tryRedirect(APP_CONFIG.ios.itmsUrl, APP_CONFIG.ios.appStoreUrl);
        } else {
            // Fallback for desktop/unknown devices
            window.location.href = APP_CONFIG.fallback;
        }
    </script>
</body>
</html>
